---
title: jvm虚拟机对象
date: 2020-12-05 12:12:57
categories: 
- java后端
tags:
- 虚拟机
---

### JVM总结
#### 虚拟机头对象

分为三部分组成

- 对象头
   
   1. markword 标记头
   
       GC分代年龄

       哈希码

  	   锁状态标志

       线程锁

	   偏向线程id	

	   偏向时间戳
   2. class指针
    <!--more-->
       
- 对象实例数据

    实例数据填充到对象属性上的值，包含父类实例变量和本类成员变量

- 填充字节

    占位符，补充不够8字节的地方

#### 对象生成过程

##### 类加载检查

虚拟机在解析.class 文件时，遇到new 指令，会先到常量池找一下有没有这个类的符号引用，如果没有则执行类加载过程。

##### 为新生对象分配内存

指针碰撞：一般是垃圾回收的复制算法和标记整理算法， 回收完会产生一大块内存空间，为对象分配内存是，直接拿对象的指针，在内存空间上移动一段距离。


空闲列表：一般是指标记清除算法回收的内存，不连续，碎片化，空闲列表里放的就是这些内存的引用，分配时，就直接在空闲列表找可用的

#### 对象的访问方式

##### 句柄式访问

引用变量先到句柄池中找句柄，在拿句柄找实际对应的对象

##### 直接指针 

引用变量跟堆内存上的对象有直接指向关系（空间换时间）

JVM虚拟机默认第二种



